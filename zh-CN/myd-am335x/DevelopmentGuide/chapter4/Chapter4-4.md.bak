---
title: 4.4 RS485
date: 2018-04-10 15:47:51
tags: [AM335X, RS485]
categories: 
- 中文版
-	TI
-	AM335X
- MYD-AM335X-Linux-4.1.18开发手册
comments: true
---
&emsp;&emsp;本例程演示MYD-AM335X系列同类型2块开发板如何使用Linux API配置开发板上的RS485并使其发送和接收数据，详情请参考源码。

**测试硬件环境：**

&emsp;&emsp;硬件调试环境搭建见[部署开发环境](/zh-CN/myd-am335x/DevelopmentGuide/chapter2/chapter2)中的硬件调试环境搭建部分。


  | 板型 | MYD-AM335X | MYD-AM335X-Y | MYD-AM335X-J |
  | ----| ---- | ---- | ---- |
  | RS485接口 | U16的4，5脚分别连接同类型开发板的4，5脚 | CON2的5，4脚分别连接同类型开发板的5，4脚 |  短接JP2和JP3，断开JP5和JP7，J18的1，2，4，5脚分别连接同类型开发板的1，2，4，5脚 |

**测试软件环境：**
  * Linux Kernel 4.1.18
  * tty_test 应用程序


  | 板型 | MYD-AM335X | MYD-AM335X-Y | MYD-AM335X-J |
  | ----| ---- | ---- | ---- |
  | 设备节点 | ttyO1 | ttyO2 |  ttyO2 ttyO3 |


**测试过程：**
&emsp;&emsp;将目录`<WORKDIR>/Examples/tty`中的可执行程序tty_test拷贝至开发板/usr/bin/目录下，执行`tty_test -h`, 查看测试程序帮助信息，如下：

````
# tty_test -h
Usage: tty_test [options]
Version 1.0
Options:
-d | --device name   tty device name, default: /dev/tty0
-m | --mode  mode   operate mode. 0: RS232, 1: RS485  default mode: 0
-f | --flow  	 			 flow control
-b | --baudrate baudrate  set baudrate, default baudrate: 115200
-l | --loop   	  	 operate circularly
-w | --write  frame	 frame string. such as: 0123456789
-h | --help          Print this message
```
&emsp;&emsp;两块开发板一个作为发送端另一个作为接收端，先在一块开发板执行以下命令发送数据：

```
# tty_test -d /dev/ttyO1 -b 9600 -w "123456789" -m 1 -l
SEND:123456789
SEND:123456789
SEND:123456789
```
&emsp;&emsp;再在另一开发板执行以下命令接收数据：

```
# tty_test -d /dev/ttyO2 -b 9600 -m 1  -l
RECV:1, total:1
RECV:2, total:1
RECV:3, total:1
RECV:4, total:1
RECV:5, total:1
RECV:6, total:1
RECV:7, total:1
RECV:8, total:1
RECV:9, total:1
RECV:1, total:1
RECV:2, total:1
RECV:3, total:1
RECV:4, total:1
RECV:5, total:1
RECV:6, total:1
RECV:7, total:1
RECV:8, total:1
RECV:9, total:1
```
&emsp;&emsp;两块板互换一下角色，结果一样，不再赘述。


