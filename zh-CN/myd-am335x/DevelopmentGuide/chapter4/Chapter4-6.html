<hr>
<p>title: 4.6 Ethernet<br>date: 2018-04-10 15:47:47<br>tags: [AM335X, Ethernet]<br>categories: </p>
<ul>
<li>中文版</li>
<li>TI</li>
<li>AM335X</li>
<li>MYD-AM335X-Linux-4.1.18开发手册<br>comments: true</li>
</ul>
<hr>
<p>&emsp;&emsp;本例程演示使用Linux API让开发板上的网口发送和接收数据，详情请参考源码。</p>
<p><strong>测试硬件环境：</strong></p>
<p>&emsp;&emsp;硬件调试环境搭建见<a href="/zh-CN/myd-am335x/DevelopmentGuide/chapter2/chapter2/">部署开发环境</a>中的硬件调试环境搭建部分。</p>
<table>
<thead>
<tr>
<th>板型</th>
<th>MYD-AM335X</th>
<th>MYD-AM335X-Y</th>
<th>MYD-AM335X-J</th>
</tr>
</thead>
<tbody>
<tr>
<td>网口接口</td>
<td>网线连接J5</td>
<td>网线连接J5</td>
<td>网线连接J5</td>
</tr>
</tbody>
</table>
<p><strong>测试软件环境：</strong></p>
<ul>
<li>Linux Kernel 4.1.18</li>
<li>server应用程序</li>
<li>client应用程序</li>
</ul>
<p><strong>测试过程：</strong><br>&emsp;&emsp;编译并拷贝<code>&lt;WORKDIR&gt;/Examples/network</code>目录下的测试程序client至开发板/usr/bin目录，server拷贝至虚拟机。假设虚拟机的ip是192.168.30.114。</p>
<p>&emsp;&emsp;配置开发板的ip：</p>
<pre><code>ifconfig eth0 192.168.30.122 up
</code></pre><p>&emsp;&emsp;配置好网络后，将开发板上eth0用网线连到PC，以虚拟机为服务器端，开发板为客户端，先在虚拟机上执行以下命令：</p>
<pre><code class="c">$./server <span class="number">192.168</span><span class="number">.30</span><span class="number">.122</span>
</code></pre>
<p>&emsp;&emsp;再在开发板执行以下命令可看到所发送的信息：</p>
<pre><code class="c"># ./client <span class="number">192.168</span><span class="number">.30</span><span class="number">.114</span>
send messages: <span class="number">1234567890</span> to <span class="number">192.168</span><span class="number">.30</span><span class="number">.114</span>
send messages: <span class="number">1234567890</span> to <span class="number">192.168</span><span class="number">.30</span><span class="number">.114</span>
send messages: <span class="number">1234567890</span> to <span class="number">192.168</span><span class="number">.30</span><span class="number">.114</span>
send messages: <span class="number">1234567890</span> to <span class="number">192.168</span><span class="number">.30</span><span class="number">.114</span>
send messages: <span class="number">1234567890</span> to <span class="number">192.168</span><span class="number">.30</span><span class="number">.114</span>
send messages: <span class="number">1234567890</span> to <span class="number">192.168</span><span class="number">.30</span><span class="number">.114</span>
</code></pre>
<p>&emsp;&emsp;同时可以看到虚拟机接收到开发板发送的数据：</p>
<pre><code class="c">$ ./server <span class="number">192.168</span><span class="number">.30</span><span class="number">.122</span>
received messages: <span class="number">1234567890</span>@ from <span class="number">192.168</span><span class="number">.30</span><span class="number">.122</span>
received messages: <span class="number">1234567890</span>@ from <span class="number">192.168</span><span class="number">.30</span><span class="number">.122</span>
received messages: <span class="number">1234567890</span>@ from <span class="number">192.168</span><span class="number">.30</span><span class="number">.122</span>
received messages: <span class="number">1234567890</span>@ from <span class="number">192.168</span><span class="number">.30</span><span class="number">.122</span>
received messages: <span class="number">1234567890</span>@ from <span class="number">192.168</span><span class="number">.30</span><span class="number">.122</span>
received messages: <span class="number">1234567890</span>@ from <span class="number">192.168</span><span class="number">.30</span><span class="number">.122</span>
</code></pre>
