<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">

  <!-- PACE Progress Bar START -->
  
    <script src="../../js/pace.min.js"></script>
    <link rel="stylesheet" href="https://github.com/HubSpot/pace/raw/master/themes/orange/pace-theme-flash.css">
  
  

  <!-- PACE Progress Bar START -->

  
  <title>SunnyMorning</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  
  
  
  <meta property="og:type" content="website">
<meta property="og:title" content="SunnyMorning">
<meta property="og:url" content="http://sunnymorning.github.io/page/6/index.html">
<meta property="og:site_name" content="SunnyMorning">
<meta property="og:locale" content="en">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="SunnyMorning">
  
    <link rel="alternate" href="/atom.xml" title="SunnyMorning" type="application/atom+xml">
  
  <link rel="icon" href="/css/images/favicon.ico">
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link href="https://fonts.googleapis.com/css?family=Open+Sans|Montserrat:700" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Roboto:400,300,300italic,400italic" rel="stylesheet" type="text/css">
  <link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">
  <style type="text/css">
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/9749f0/00000000000000000001008f/27/l?subset_id=2&fvd=n5) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/90cf9f/000000000000000000010091/27/l?subset_id=2&fvd=n7) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/8a5494/000000000000000000013365/27/l?subset_id=2&fvd=n4) format("woff2");font-weight:lighter;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/d337d8/000000000000000000010095/27/l?subset_id=2&fvd=i4) format("woff2");font-weight:400;font-style:italic;}</style>
    
  <link rel="stylesheet" id="athemes-headings-fonts-css" href="//fonts.googleapis.com/css?family=Yanone+Kaffeesatz%3A200%2C300%2C400%2C700&amp;ver=4.6.1" type="text/css" media="all">
  <link rel="stylesheet" href="../../css/style.css">

  <script src="../../js/jquery-3.1.1.min.js"></script>

  <!-- Bootstrap core CSS -->
  <link rel="stylesheet" href="/css/bootstrap.css" >
  <link rel="stylesheet" href="/css/hiero.css" >
  <link rel="stylesheet" href="/css/glyphs.css" >
  
    <link rel="stylesheet" href="/css/vdonate.css" >
  

  <!-- Custom CSS -->
  <link rel="stylesheet" href="../../css/my.css">
  <!-- Google Adsense -->
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
      (adsbygoogle = window.adsbygoogle || []).push({
          google_ad_client: "ca-pub-0123456789ABCDEF",
          enable_page_level_ads: true
      });
  </script>
</head>

<script>
var themeMenus = {};

  themeMenus["../../index.html"] = "Home"; 

  themeMenus["../../archives"] = "Archives"; 

  themeMenus["../../categories"] = "Categories"; 

  themeMenus["../../tags"] = "Tags"; 

  themeMenus["../../about"] = "About"; 

</script>


  <body>


  <header id="allheader" class="site-header" role="banner">
  <div class="clearfix container">
      <div class="site-branding">

          <h1 class="site-title">
            
              <a href="/" title="SunnyMorning" rel="home"> SunnyMorning </a>
            
          </h1>

          
            
          <nav id="main-navigation" class="main-navigation" role="navigation">
            <a class="nav-open">Menu</a>
            <a class="nav-close">Close</a>
            <div class="clearfix sf-menu">

              <ul id="main-nav" class="nmenu sf-js-enabled">
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="../../index.html">Home</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="../../archives">Archives</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="../../categories">Categories</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="../../tags">Tags</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="../../about">About</a> </li>
                    
              </ul>
            </div>
          </nav>


      </div>
  </div>
</header>


  <div id="originBgDiv" style="background: #fff; width: 100%;">

      <div style="max-height:600px; overflow: hidden;  display: flex; display: -webkit-flex; align-items: center;">
        <img id="originBg" width="100%" alt="" src="">
      </div>

  </div>

  <script>
  function setAboutIMG(){
      var imgUrls = "css/images/pose.jpg,https://source.unsplash.com/collection/954550/1920x1080".split(",");
      var random = Math.floor((Math.random() * imgUrls.length ));
      if (imgUrls[random].startsWith('http') || imgUrls[random].indexOf('://') >= 0) {
        document.getElementById("originBg").src=imgUrls[random];
      } else {
        document.getElementById("originBg").src='/' + imgUrls[random];
      }
  }
  bgDiv=document.getElementById("originBgDiv");
  if(location.pathname.match('about')){
    setAboutIMG();
    bgDiv.style.display='block';
  }else{
    bgDiv.style.display='none';
  }
  </script>



  <div id="container">
    <div id="wrap">
            
      <div id="content" class="outer">
        
          <section id="main">
  
    <article id="post-myd-am335x/DevelopmentGuide/chapter5/Chapter5-1"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="../../en/myd-am335x/DevelopmentGuide/chapter5/Chapter5-1/">5.1 Install QtCreator</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="../../en/myd-am335x/DevelopmentGuide/chapter5/Chapter5-1/" class="article-date">
	  <time datetime="2018-04-10T07:46:57.000Z" itemprop="datePublished">April 10, 2018</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p>On Ubuntu 64bit OS, customers can install QtCreator as shown below:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ cd &lt;WORKDIR&gt;</span><br><span class="line">$ cp /media/cdrom/03-Tools/Qt/qt-creator-opensource-linux-x86_64-4.1.0.run .</span><br><span class="line">$ chmod a+x qt-creator-opensource-linux-x86_64-4.1.0.run</span><br><span class="line">$ sudo ./qt-creator-opensource-linux-x86_64-4.1.0.run</span><br></pre></td></tr></table></figure>
<p>QtCreator will be installed on Ubuntu OS step by step automatically.</p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
	<span class="ico-folder"></span>
    <a class="article-category-link" href="../../categories/English-Version/">English Version</a>, <a class="article-category-link" href="../../categories/English-Version/TI/">TI</a>, <a class="article-category-link" href="../../categories/English-Version/TI/AM335X/">AM335X</a>, <a class="article-category-link" href="../../categories/English-Version/TI/AM335X/MYD-AM335X-Linux-4-1-18-Development-Guide/">MYD-AM335X-Linux-4.1.18 Development Guide</a>

      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="../../tags/AM335X/">AM335X</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="../../tags/QtCreator/">QtCreator</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

  
    <article id="post-myd-am335x/DevelopmentGuide/chapter5/Chapter5-1"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="../../zh-CN/myd-am335x/DevelopmentGuide/chapter5/Chapter5-1/">5.1 安装QtCreator</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="../../zh-CN/myd-am335x/DevelopmentGuide/chapter5/Chapter5-1/" class="article-date">
	  <time datetime="2018-04-10T07:46:57.000Z" itemprop="datePublished">April 10, 2018</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong> 安装开发环境</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ cd &lt;WORKDIR&gt;</span><br><span class="line">$ cp /media/cdrom/03-Tools/Qt/qt-creator-opensource-linux-x86_64-4.1.0.run .</span><br><span class="line">$ chmod a+x qt-creator-opensource-linux-x86_64-4.1.0.run</span><br><span class="line">$ sudo ./qt-creator-opensource-linux-x86_64-4.1.0.run</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;此安装过程类似win下应用的安装方法,点击下一步即可。</p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
	<span class="ico-folder"></span>
    <a class="article-category-link" href="../../categories/中文版/">中文版</a>, <a class="article-category-link" href="../../categories/中文版/TI/">TI</a>, <a class="article-category-link" href="../../categories/中文版/TI/AM335X/">AM335X</a>, <a class="article-category-link" href="../../categories/中文版/TI/AM335X/MYD-AM335X-Linux-4-1-18开发手册/">MYD-AM335X-Linux-4.1.18开发手册</a>

      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="../../tags/AM335X/">AM335X</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="../../tags/QtCreator/">QtCreator</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

  
    <article id="post-myd-am335x/DevelopmentGuide/chapter5/Chapter5-2"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="../../zh-CN/myd-am335x/DevelopmentGuide/chapter5/Chapter5-2/">5.2 配置QtCreator</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="../../zh-CN/myd-am335x/DevelopmentGuide/chapter5/Chapter5-2/" class="article-date">
	  <time datetime="2018-04-10T07:46:55.000Z" itemprop="datePublished">April 10, 2018</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="配置-QtCreator-开发环境"><a href="#配置-QtCreator-开发环境" class="headerlink" title="配置 QtCreator 开发环境"></a>配置 QtCreator 开发环境</h1><p>&emsp;&emsp;运行 QtCreator 后,依次点击<code>Tools</code>-&gt;<code>Options</code>,出现选项对话框,在左边点击<code>Build &amp; Run</code>,右边选择<code>Compilers</code>标签。</p>
<p><img src="/zh-CN/myd-am335x/DevelopmentGuide/chapter5/5_2_1.png" alt="图5-2-1 编译器选择"></p>
<p>&emsp;&emsp;点击右侧<code>Add</code>,弹出下拉列表后,选择<code>Custom</code>,在下侧填写以下内容: <code>Name</code>, <code>Compiler path</code>, <code>Make path</code> 和 <code>ABI</code>。填写完成后,点击<code>Apply</code>,进行保存。</p>
<p><img src="/zh-CN/myd-am335x/DevelopmentGuide/chapter5/5_2_2.png" alt="图5-2-2 添加编译器"></p>
<p>&emsp;&emsp;在同一窗口下,选择<code>Qt Version</code>标签,在右侧点击<code>Add...</code>,会弹出对话框,切换目录到Chapter3.4中编译QT得到的SDK目录,选择<code>qmake</code>文件后,点击<code>Open</code>按钮,设置完成之后，点击<code>Apply</code>按钮保存。</p>
<p><img src="/zh-CN/myd-am335x/DevelopmentGuide/chapter5/5_2_3.png" alt="图5-2-3 选择qmake构建工具"></p>
<p>&emsp;&emsp;在<code>Build&amp;Run</code>窗口，继续选择上边的<code>Kits</code>标签,点击右侧<code>Add</code>,填写相应内容。其中<code>Sysroot</code>选择编译工具链的目录,<code>Compiler</code>选择之前填写的名称,<code>Debugger</code>选择<code>None</code>,<code>Qt version</code>选择之前添加时的名称,<code>CMake Tool</code>设置为默认。</p>
<p><img src="/zh-CN/myd-am335x/DevelopmentGuide/chapter5/5_2_4.png" alt="图5-2-4 添加Kits"></p>
<h1 id="创建-Helloworld-项目"><a href="#创建-Helloworld-项目" class="headerlink" title="创建 Helloworld 项目"></a>创建 Helloworld 项目</h1><p>&emsp;&emsp;在菜单栏选择<code>File</code>-&gt;<code>New File or Project</code>,在打开的对话框中,依次选择<code>Application</code>-&gt;<code>Qt Widgets Application</code>,点击<code>Choose...</code>, 如下图所示:</p>
<p><img src="/zh-CN/myd-am335x/DevelopmentGuide/chapter5/5_2_5.png" alt="图5-2-5 创建新工程"></p>
<p>&emsp;&emsp;在弹出的<code>Qt Widgets Application</code>对话框中,设置项目名称为<code>helloworld</code>,<code>Create in</code>一栏填写项目的存储路径, 如下：</p>
<p><img src="/zh-CN/myd-am335x/DevelopmentGuide/chapter5/5_2_6.png" alt="图5-2-6 设置新工程名称和路径"></p>
<p>&emsp;&emsp;点击<code>Next</code>后,选择之前添加好的<code>Kits</code>,继续点击<code>Next</code>, 如下:</p>
<p><img src="/zh-CN/myd-am335x/DevelopmentGuide/chapter5/5_2_7.png" alt="图5-2-7 设置新工程Kits"></p>
<p>&emsp;&emsp;选择当前的的应用继承自哪种Widget,默认选择QMainWindow,然后点击<code>Next</code>进入下一步。</p>
<p><img src="/zh-CN/myd-am335x/DevelopmentGuide/chapter5/5_2_8.png" alt="图5-2-8 选择应用程序的类型"></p>
<p>&emsp;&emsp;以上信息填写完后,点击<code>Finish</code>, 完成QtCreator工程的创建。</p>
<p><img src="/zh-CN/myd-am335x/DevelopmentGuide/chapter5/5_2_9.png" alt="图5-2-9 完成工程创建"></p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
	<span class="ico-folder"></span>
    <a class="article-category-link" href="../../categories/中文版/">中文版</a>, <a class="article-category-link" href="../../categories/中文版/TI/">TI</a>, <a class="article-category-link" href="../../categories/中文版/TI/AM335X/">AM335X</a>, <a class="article-category-link" href="../../categories/中文版/TI/AM335X/MYD-AM335X-Linux-4-1-18开发手册/">MYD-AM335X-Linux-4.1.18开发手册</a>

      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="../../tags/AM335X/">AM335X</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="../../tags/QtCreator/">QtCreator</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

  
    <article id="post-myd-am335x/DevelopmentGuide/chapter5/Chapter5-2"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="../../en/myd-am335x/DevelopmentGuide/chapter5/Chapter5-2/">5.2 Config QtCreator</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="../../en/myd-am335x/DevelopmentGuide/chapter5/Chapter5-2/" class="article-date">
	  <time datetime="2018-04-10T07:46:55.000Z" itemprop="datePublished">April 10, 2018</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <ul>
<li>Config Build&amp;Run Environment:</li>
</ul>
<p>Open QtCreator, choose <code>Tools</code>-&gt;<code>Options</code>, then the <code>Build &amp; Run</code> dialog popups<code>.
Please choose the</code>Compilers` tab to set compiler for QtCreator as shown below:</p>
<p><img src="/en/myd-am335x/DevelopmentGuide/chapter5/5_2_1.png" alt="Figure 5-2-1 Settings of Compiler"></p>
<p>Press <code>Add</code> button at the right side of this dialog, choose <code>Custom</code> in the dropdown list, and then set <code>Name</code>, <code>Compiler path</code>, <code>Make path</code> 和 <code>ABI</code> as shown below.<br>After complete, press the <code>Apply</code> button to save.</p>
<p><img src="/en/myd-am335x/DevelopmentGuide/chapter5/5_2_2.png" alt="Figure 5-2-2 Add Compiler for QtCreator"></p>
<p>At the same dialog, choose <code>Qt Version</code> Tab to add qmake, at the right side of this dialog, press <code>Add</code> button, then a new dialog popups,<br>please choose the qmake tools described at Chapter 3-4-1. After complete, press <code>Open</code> to set qmake, and then <code>Apply</code> to save.</p>
<p><img src="/en/myd-am335x/DevelopmentGuide/chapter5/5_2_3.png" alt="Figure 5-2-3 Choose Qmake"></p>
<p>In the <code>Build&amp;Run</code> window, continue to choose <code>Kits</code> tab, and at the right side of this dialog, press <code>Add</code> button, then add settings of running environment for QT5 application. In the <code>Sysroot</code> editbox, write the path of cross compile toolchain, in the <code>Compiler</code> and <code>Qt Version</code> editboxs, write the settings being set before, set <code>Debugger</code> to <code>None</code>, set <code>CMake Tools</code> to default as shown below:</p>
<p><img src="/en/myd-am335x/DevelopmentGuide/chapter5/5_2_4.png" alt="Figure 5-2-4 Add Kits for QtCreator"></p>
<ul>
<li>Create Helloworld Project:</li>
</ul>
<p>In the main menu of QtCreate, choose <code>File</code>-&gt;<code>New File or Project</code>, and in the popup dialog, choose <code>Application</code>-&gt;<code>Qt Widgets Application</code> as shown below:</p>
<p><img src="/en/myd-am335x/DevelopmentGuide/chapter5/5_2_5.png" alt="Figure 5-2-5 Create a QT Widgets Application"></p>
<p>After pressing <code>Choose...</code> button, the <code>Qt Widgets Application</code> settings dialog popups, please set the name and path of the project as shown below in <code>Name</code> and <code>Create in</code> editboxs as shown below:</p>
<p><img src="/en/myd-am335x/DevelopmentGuide/chapter5/5_2_6.png" alt="Figure 5-2-6 Set the Name and Path of the Project"></p>
<p>Press <code>Next</code> button and choose the setting for <code>Kits</code> as below:</p>
<p><img src="/en/myd-am335x/DevelopmentGuide/chapter5/5_2_7.png" alt="Figure 5-2-7 Set Kits for the Project"></p>
<p>Choose the base class of the project as shown below:</p>
<p><img src="/en/myd-am335x/DevelopmentGuide/chapter5/5_2_8.png" alt="Figure 5-2-8 Choose Base Class"></p>
<p>Press <code>Finish</code> button to create and save the project.</p>
<p><img src="/en/myd-am335x/DevelopmentGuide/chapter5/5_2_9.png" alt="Figure 5-2-9  Finish Creating a New Project"></p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
	<span class="ico-folder"></span>
    <a class="article-category-link" href="../../categories/English-Version/">English Version</a>, <a class="article-category-link" href="../../categories/English-Version/TI/">TI</a>, <a class="article-category-link" href="../../categories/English-Version/TI/AM335X/">AM335X</a>, <a class="article-category-link" href="../../categories/English-Version/TI/AM335X/MYD-AM335X-Linux-4-1-18-Development-Guide/">MYD-AM335X-Linux-4.1.18 Development Guide</a>

      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="../../tags/AM335X/">AM335X</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="../../tags/QtCreator/">QtCreator</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

  
    <article id="post-myd-am335x/DevelopmentGuide/chapter5/Chapter5-3"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="../../zh-CN/myd-am335x/DevelopmentGuide/chapter5/Chapter5-3/">5.3 编译运行QT应用</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="../../zh-CN/myd-am335x/DevelopmentGuide/chapter5/Chapter5-3/" class="article-date">
	  <time datetime="2018-04-10T07:46:53.000Z" itemprop="datePublished">April 10, 2018</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p>&emsp;&emsp;以下是创建好的<code>helloworld</code>项目截图,左侧是<code>QtCreator</code>创建好的项目目录结构,右侧是代码编辑区。</p>
<p><img src="/zh-CN/myd-am335x/DevelopmentGuide/chapter5/5_3_1.png" alt="图5-3-1 项目文件管理窗口"></p>
<p>&emsp;&emsp;双击左侧的<code>Forms</code>里的<code>mainwindow.ui</code>文件,打开<code>Design</code>视图,从左铡<code>Display Widgets</code>栏目下,拖动<code>Label</code>到中间的区域。双击后,修改内容为<code>Hello,world!</code>。</p>
<p><img src="/zh-CN/myd-am335x/DevelopmentGuide/chapter5/5_3_2.png" alt="图5-3-2 可视化界面编辑"></p>
<p>&emsp;&emsp;完成以上操作后,就可以点击菜单栏<code>Build</code>-&gt;<code>Build Project hellowrld</code>,进行项目构建,此时下侧<code>Compile Output</code>会有编译信息输出。若有错误,请根据提示,修改正确后重新构建。</p>
<p><img src="/zh-CN/myd-am335x/DevelopmentGuide/chapter5/5_3_3.png" alt="图5-3-3 编译项目"></p>
<p>&emsp;&emsp;QtCreator 构建 helloworld 项目后,编译好的二进制文件存放在<em>~/build-helloworld-myir_dev_kit-Debug/</em>目录下,可以使用 file 命令查看,是否编译为 ARM 架构。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">file helloworld</span><br><span class="line">helloworld: ELF 32-bit LSB executable, ARM, version 1 (GNU/Linux), dynamically linked</span><br><span class="line"> (uses shared libs), for GNU/Linux 4.1.0, not stripped</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;将生成的QT应用程序的可执行文件<code>helloworld</code>拷贝到开发板/usr/bin目录下,并在开发板上执行,如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># helloworld  --platform linuxfb:fb=/dev/fb0</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;将会在 LCD 屏幕上看到<code>Hello,World!</code>的 Qt 窗口。</p>
<p><img src="/zh-CN/myd-am335x/DevelopmentGuide/chapter5/5_3_4.png" alt="图5-3-4 QT应用程序执行"></p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
	<span class="ico-folder"></span>
    <a class="article-category-link" href="../../categories/中文版/">中文版</a>, <a class="article-category-link" href="../../categories/中文版/TI/">TI</a>, <a class="article-category-link" href="../../categories/中文版/TI/AM335X/">AM335X</a>, <a class="article-category-link" href="../../categories/中文版/TI/AM335X/MYD-AM335X-Linux-4-1-18开发手册/">MYD-AM335X-Linux-4.1.18开发手册</a>

      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="../../tags/AM335X/">AM335X</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="../../tags/工具链/">工具链</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="../../tags/开发环境/">开发环境</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

  
    <article id="post-myd-am335x/DevelopmentGuide/chapter5/Chapter5-3"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="../../en/myd-am335x/DevelopmentGuide/chapter5/Chapter5-3/">5.3 Build QT Application</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="../../en/myd-am335x/DevelopmentGuide/chapter5/Chapter5-3/" class="article-date">
	  <time datetime="2018-04-10T07:46:53.000Z" itemprop="datePublished">April 10, 2018</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p>In the previous section, a QT5 project named as <code>helloworld</code> has been created.<br>It is shown in the project manage of QtCreator as below:</p>
<p><img src="/en/myd-am335x/DevelopmentGuide/chapter5/5_3_1.png" alt="Figure 5-3-1 Project Manager of QtCreator"></p>
<p>Double click the <code>mainwindow.ui</code> at the left side to open the <code>Design</code> view for designing a UI for helloworld project visually.<br>Please drag a <code>Label</code> widget to the center of the mainwindow from the widgets list, double click the label and input `Hello, world!”.</p>
<p><img src="/en/myd-am335x/DevelopmentGuide/chapter5/5_3_2.png" alt="Figure 5-3-2 UI Design View"></p>
<p>After complete, choose <code>Build</code>-&gt;<code>Build Project</code> in the main menu of QtCreator to build the helloworld project.<br>Some log information outputs to the <code>Compile Output</code> sub window during compiling, in case of any erros and warning, please fix them and build again.</p>
<p><img src="/en/myd-am335x/DevelopmentGuide/chapter5/5_3_3.png" alt="Figure 5-3-3 Build Project"></p>
<p>After building,  a binary format QT5 application is generated at <em>~/build-helloworld-myir_dev_kit-Debug/</em>, please use <code>file</code> command to check it and<br>make sure it can work on ARM embedded Linux system as below:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">file helloworld</span><br><span class="line">helloworld: ELF 32-bit LSB executable, ARM, version 1 (GNU/Linux), dynamically linked</span><br><span class="line"> (uses shared libs), for GNU/Linux 4.1.0, not stripped</span><br></pre></td></tr></table></figure>
<p>Finaly, please copy the binary format application <code>helloworld</code> to <code>/usr/bin</code> directory of MYD-AM335X series development board and execute as below:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># helloworld  --platform linuxfb:fb=/dev/fb0</span><br></pre></td></tr></table></figure>
<p>A Window with a <code>Hello,World!</code> text label displays on the LCD screen as below:</p>
<p><img src="/en/myd-am335x/DevelopmentGuide/chapter5/5_3_4.png" alt="Figure 5-3-4 Execute QT5 Application"></p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
	<span class="ico-folder"></span>
    <a class="article-category-link" href="../../categories/English-Version/">English Version</a>, <a class="article-category-link" href="../../categories/English-Version/TI/">TI</a>, <a class="article-category-link" href="../../categories/English-Version/TI/AM335X/">AM335X</a>, <a class="article-category-link" href="../../categories/English-Version/TI/AM335X/MYD-AM335X-Linux-4-1-18-Development-Guide/">MYD-AM335X-Linux-4.1.18 Development Guide</a>

      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="../../tags/AM335X/">AM335X</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="../../tags/QT-Application/">QT Application</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

  
    <article id="post-myd-am335x/DevelopmentGuide/chapter6/Chapter6"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="../../zh-CN/myd-am335x/DevelopmentGuide/chapter6/Chapter6/">6. Linux 系统更新</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="../../zh-CN/myd-am335x/DevelopmentGuide/chapter6/Chapter6/" class="article-date">
	  <time datetime="2018-04-10T07:45:59.000Z" itemprop="datePublished">April 10, 2018</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p>&emsp;&emsp;本小节主要介绍Linux系统的不同启动方式，包括tf卡启动，NAND Flash烧录与启动，NFS ROOT文件系统挂载。在此之前先看看光盘中已经编译好的镜像文件：</p>
<table>
<thead>
<tr>
<th>文件名</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>MLO</td>
<td>一级引导（SPL）</td>
</tr>
<tr>
<td>u-boot.img</td>
<td>MMC启动u-boot镜像</td>
</tr>
<tr>
<td>uEnv.txt</td>
<td>默认环境变量</td>
</tr>
<tr>
<td>uEnv_ramdisk.txt</td>
<td>ramdisk启动默认环境变量，使用时需要重命名为uEnv.txt</td>
</tr>
<tr>
<td>zImage</td>
<td>内核镜像</td>
</tr>
<tr>
<td>myd_c335x.dtb</td>
<td>MYD-AM335X设备树</td>
</tr>
<tr>
<td>myd_y335x.dtb</td>
<td>MYD-AM335X-Y设备树</td>
</tr>
<tr>
<td>myd_j335x.dtb</td>
<td>MYD-AM335X-J设备树</td>
</tr>
<tr>
<td>rootfs.tar.gz</td>
<td>根文件系统目录压缩包</td>
</tr>
<tr>
<td>rootfs.ubi</td>
<td>ubi根文件系统镜像</td>
</tr>
<tr>
<td>ramdisk.gz</td>
<td>ramdisk启动文件系统</td>
</tr>
<tr>
<td>sdcard.img</td>
<td>sdcard启动盘镜像，直接通过win32diskimager写入TF卡即可</td>
</tr>
</tbody>
</table>
<blockquote>
<p><strong>注意：MYD-AM335X的启动开发板之前需要注意JP8跳线的连接，连接JP8的1-2脚时将会从SD卡启动系统，连接JP8的2-3脚时将会从NandFlash启动系统。改变JP8跳线的连接之后需要给开发板重新上电启动才能生效。MYD-AM335X-Y设置启动模式的跳线为JP1，MYD-AM335X-J设置启动模式的跳线为JP6。</strong></p>
</blockquote>
<p>&emsp;&emsp;<code>MYD-AM335X</code>系列开发板目前提供了多种系统引导加载方案。</p>
<ul>
<li>方案1: TF卡启动(EXT4文件系统).</li>
<li>方案2: TF卡启动(Ramdisk文件系统).</li>
<li>方案3: NAND Flash启动（ubi文件系统).</li>
<li>方案4: NFS ROOT文件系统（主要用于文件系统调试）.</li>
</ul>
<h1 id="TF卡启动-EXT4文件系统"><a href="#TF卡启动-EXT4文件系统" class="headerlink" title="TF卡启动(EXT4文件系统)"></a>TF卡启动(EXT4文件系统)</h1><blockquote>
<p><strong>注意：烧写过程会清除TF/SD卡原有内容，请注意备份。</strong></p>
</blockquote>
<p>&emsp;&emsp;Buildroot编译完成之后生成sdcard.img，它是整个TF卡的磁盘镜像文件，其中包含两个分区，分区一为FAT格式，包含了MLO, u-boot.img, zImage和设备树，uEnv.txt等文件;分区二为EXT4格式，为该启动模式下的根文件系统。  </p>
<p><img src="/zh-CN/myd-am335x/DevelopmentGuide/chapter6/6_1.png" alt="图6-1  使用win32diskimager烧写sdcard.img">  </p>
<ul>
<li>把TF卡插入USB读卡器，然后将读卡器跟windows主机连接。</li>
<li>使用win32diskimager.exe烧写sdcard.img到TF卡上，如图6-1所示。</li>
<li>烧写完成之后，将TF卡插入开发板TF卡槽，设置为TF卡启动模式，上电即可从TF卡引导启动，并加载位于TF卡上的EXT4根文件系统。</li>
</ul>
<h1 id="TF卡启动-Ramdisk文件系统"><a href="#TF卡启动-Ramdisk文件系统" class="headerlink" title="TF卡启动(Ramdisk文件系统)"></a>TF卡启动(Ramdisk文件系统)</h1><blockquote>
<p><strong>注意：HP USB Disk Storage Format Tool会将清除TF卡的分区。若需要保留分区，请使用电脑系统自带的格式软件。</strong></p>
</blockquote>
<ul>
<li>TF卡格式化<br>(请使用光盘目录03-Tools目录下的HP USB Disk Storage Format Tool 2.0.6工具来格式化TF卡。)<br>  1.把MMC/SD卡插入USB读卡器，然后将读卡器跟电脑连接<br>  2.打开HP USB Disk Storage Format Tool，出现类似提示如下：</li>
</ul>
<p><img src="/zh-CN/myd-am335x/DevelopmentGuide/chapter6/6_2.png" alt="图6-2 格式化TF卡"></p>
<pre><code>3.选择“FAT32”系统格式
4.勾选Quick format（可选）
5.点击“Start”
6.等待格式化完成，点击“OK”
</code></pre><ul>
<li>映像更新</li>
</ul>
<p>&emsp;&emsp;将02-Images\Linux-image目录下的所有文件拷贝到TF卡上，备份uEnv.txt并重命名uEnv_ramdisk.txt为uEnv.txt，然后将TF卡插入到开发板上的SD卡插槽，连接对应板子设置启动方式的跳线帽的1-2脚，上电重启开发板，输入账户名<code>root</code>登录。</p>
<h1 id="NAND-Flash启动（ubi文件系统"><a href="#NAND-Flash启动（ubi文件系统" class="headerlink" title="NAND Flash启动（ubi文件系统)"></a>NAND Flash启动（ubi文件系统)</h1><p>&emsp;&emsp;Nand启动映像的更新需要借助于u-boot来完成。不管NAND Flash是否有数据，都可以利用TF卡启动的u-boot对NAND Flash更新映像。</p>
<ul>
<li><p>准备</p>
<p>  1.用光盘目录03-Tools目录下的HP USB Disk Storage Format Tool 2.0.6工具将TF卡格式化为FAT或FAT32文件系统</p>
<p>  2.将光盘目录02-Images\Linux-image目录下的映像文件拷贝到TF卡中  </p>
</li>
<li><p>更新</p>
</li>
</ul>
<p>&emsp;&emsp;将带有系统映象的TF卡插入开发板，连接对应板子设置启动方式的跳线帽的1-2脚，上电启动，在u-boot 的提示读秒处，按下键盘上任意键进入u-boot：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">U-Boot <span class="number">2016.05</span> (Jan <span class="number">09</span> <span class="number">2017</span> - <span class="number">19</span>:<span class="number">37</span>:<span class="number">43</span> +<span class="number">0800</span>)</span><br><span class="line"></span><br><span class="line">       Watchdog enabled</span><br><span class="line">I2C:   ready</span><br><span class="line">DRAM:  <span class="number">512</span> MiB</span><br><span class="line">NAND:  <span class="number">512</span> MiB</span><br><span class="line">MMC:   OMAP SD/MMC: <span class="number">0</span>, OMAP SD/MMC: <span class="number">1</span></span><br><span class="line">*** Warning - bad CRC, <span class="keyword">using</span> <span class="keyword">default</span> environment</span><br><span class="line"></span><br><span class="line">Net:   cpsw</span><br><span class="line">Press SPACE to <span class="built_in">abort</span> autoboot in <span class="number">2</span> seconds</span><br><span class="line">MYIR&gt;#</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;进入u-boot命令行后，在命令行上输入“run updatesys”，开始自动更新系统：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">MYIR&gt;<span class="meta"># run updatesys</span></span><br><span class="line"></span><br><span class="line">NAND erase.chip: device <span class="number">0</span> whole chip</span><br><span class="line">Erasing at <span class="number">0x1ffe0000</span> -- <span class="number">100</span>% complete.</span><br><span class="line">OK</span><br><span class="line"><span class="keyword">switch</span> to partitions #<span class="number">0</span>, OK</span><br><span class="line">mmc0 is current device</span><br><span class="line">reading MLO</span><br><span class="line"><span class="number">55092</span> bytes read in <span class="number">10</span> ms (<span class="number">5.3</span> MiB/s)</span><br><span class="line"></span><br><span class="line">NAND write: device <span class="number">0</span> offset <span class="number">0x0</span>, size <span class="number">0xd734</span></span><br><span class="line"> <span class="number">55092</span> bytes written: OK</span><br><span class="line">reading myd_c335x.dtb</span><br><span class="line"><span class="number">39229</span> bytes read in <span class="number">10</span> ms (<span class="number">3.7</span> MiB/s)</span><br><span class="line"></span><br><span class="line">NAND write: device <span class="number">0</span> offset <span class="number">0x80000</span>, size <span class="number">0x993d</span></span><br><span class="line"> <span class="number">39229</span> bytes written: OK</span><br><span class="line">reading u-boot.img</span><br><span class="line"><span class="number">321300</span> bytes read in <span class="number">34</span> ms (<span class="number">9</span> MiB/s)</span><br><span class="line"></span><br><span class="line">NAND write: device <span class="number">0</span> offset <span class="number">0xc0000</span>, size <span class="number">0x4e714</span></span><br><span class="line"> <span class="number">321300</span> bytes written: OK</span><br><span class="line">reading zImage</span><br><span class="line"><span class="number">4480016</span> bytes read in <span class="number">396</span> ms (<span class="number">10.8</span> MiB/s)</span><br><span class="line"></span><br><span class="line">NAND write: device <span class="number">0</span> offset <span class="number">0x200000</span>, size <span class="number">0x445c10</span></span><br><span class="line"> <span class="number">4480016</span> bytes written: OK</span><br><span class="line">reading rootfs.ubi</span><br><span class="line"><span class="number">24248320</span> bytes read in <span class="number">2111</span> ms (<span class="number">11</span> MiB/s)</span><br><span class="line"></span><br><span class="line">NAND write: device <span class="number">0</span> offset <span class="number">0xa00000</span>, size <span class="number">0x1720000</span></span><br><span class="line"> <span class="number">24248320</span> bytes written: OK</span><br><span class="line">MYIR&gt;#</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;系统更新完后，会自动u-boot的命令行模式，断电拨出TF卡，连接对应板子设置启动方式的跳线帽的2-3脚，给开发板重新上电后即可从Nand Flash启动，输入帐户名<code>root</code>登录。</p>
<h1 id="NFS-ROOT文件系统（主要用于文件系统调试）"><a href="#NFS-ROOT文件系统（主要用于文件系统调试）" class="headerlink" title="NFS ROOT文件系统（主要用于文件系统调试）"></a>NFS ROOT文件系统（主要用于文件系统调试）</h1><p>&emsp;&emsp;Buildroot编译完成之后生成的rootfs.tar.gz，可以解压之后放到NFS服务器上作为NFS ROOT文件系统进行加载，便于文件系统的调试。<br>&emsp;&emsp;使用NFS ROOT方式启动，首先需要配置TFTP和NFS服务，下面以ubuntu系统为例加以说明。</p>
<p><strong>安装TFTP服务端</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get install tftp-hpa tftpd-hpa</span><br></pre></td></tr></table></figure>
<p><strong>配置TFTP服务</strong></p>
<p>&emsp;&emsp;创建TFTP服务器工作目录,并打开TFTP服务配置文件,如下:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ mkdir -p &lt;WORKDIR&gt;/tftpboot</span><br><span class="line">$ chmod 777 &lt;WORKDIR&gt;/tftpboot</span><br><span class="line">$ sudo vi /etc/default/tftpd-hpa</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;修改或添加以下字段：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">TFTP_DIRECTORY=&quot;&lt;WORKDIR&gt;/tftpboot&quot;</span><br><span class="line">TFTP_OPTIONS=&quot;-l -c -s&quot;</span><br></pre></td></tr></table></figure></p>
<p><strong>重启TFTP服务</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo service tftpd-hpa restart</span><br></pre></td></tr></table></figure></p>
<p>&emsp;&emsp;将出厂镜像或者自行编译的MLO, u-boot.img, zImage和设备树文件以及ramdisk.gz等拷贝到TFTP服务器的<code>&lt;WORKDIR&gt;/tftpboot</code>目录，在U-Boot命令行，即可以使用tftpboot命令加载TFTP服务器上<code>&lt;WORKDIR&gt;/tftpboot</code>目录下的文件,例如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt;# help tftpboot</span><br><span class="line">tftpboot - boot image via network using TFTP protocol</span><br><span class="line"></span><br><span class="line">Usage:</span><br><span class="line">tftpboot [loadAddress] [[hostIPaddr:]bootfilename]</span><br><span class="line">&gt;# tftpboot $&#123;loadaddr&#125; 192.168.1.111:zImage</span><br></pre></td></tr></table></figure></p>
<p><strong>安装NFS服务</strong></p>
<p>&emsp;&emsp;NFS即网络文件系统，允许主机直接通过网络实现文件系统挂载，还可以在Linux系统启动的时候将NFS服务器上的目录挂载为开发板的根文件系统。下面以ubuntu文件系统为例，介绍NFS服务的安装和配置。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get install nfs-kernel-server</span><br></pre></td></tr></table></figure></p>
<p><strong>配置NFS服务</strong></p>
<p>&emsp;&emsp;编辑/etc/exports文件，添加NFS服务导出的工作目录。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo vi /etc/exports</span><br></pre></td></tr></table></figure></p>
<p>&emsp;&emsp;添加NFS ROOT根文件系统目录，下面以/home/myir/rootfs为例，将其添加到/etc/exports文件中, 如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/home/myir/rootfs *(rw,nohide,insecure,no_subtree_check,async,no_root_squash)</span><br></pre></td></tr></table></figure></p>
<p><strong>重启NFS服务</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ cd /home/myir/rootfs</span><br><span class="line">$ sudo tar zxvf  &lt;WORKDIR&gt;/images/rootfs.tar.gz</span><br><span class="line">$ sudo service nfs-kernel-server restart</span><br></pre></td></tr></table></figure></p>
<p>&emsp;&emsp;在NFS服务器本机上测试NFS服务：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo mount -t nfs 127.0.0.1:/home/myir/rootfs /mnt</span><br></pre></td></tr></table></figure></p>
<p><strong>挂载NFS ROOT文件系统</strong></p>
<p>&emsp;&emsp;若本机NFS挂载成功，接下来将开发板和NFS服务器接入到同一网络，在开发板上挂载NFS ROOT文件系统。<br>&emsp;&emsp;先断电，然后修改启动方式跳线帽为nandflash方式启动，nandflash上必须要先烧写uboot。拷贝zImage和dtb文件到<workdir>/tftpboot目录，如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cp &lt;WORKDIR&gt;/Filesystem/myir-buildroot/output/images/zImage &lt;WORKDIR&gt;/tftpboot</span><br><span class="line">cp &lt;WORKDIR&gt;/Filesystem/myir-buildroot/output/images/myd_c335x.dtb &lt;WORKDIR&gt;/tftpboot</span><br></pre></td></tr></table></figure></workdir></p>
<p>&emsp;&emsp;解压rootfs.tar.gz到/home/myir/rootfs目录，如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /home/myir/rootfs</span><br><span class="line">sudo tar -xvf &lt;WORKDIR&gt;/Filesystem/myir-buildroot/output/images/rootfs.tar.gz ./</span><br></pre></td></tr></table></figure></p>
<p>&emsp;&emsp;例如，NFS服务器IP为192.168.1.111.在U-boot中设置开发板IP为192.168.1.112, 如下:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;# setenv ipaddr 192.168.1.112</span><br><span class="line">&gt;# setenv serverip 192.168.1.111</span><br></pre></td></tr></table></figure></p>
<p>&emsp;&emsp;在U-boot中使用ping命令测试开发板与NFS服务器是否连通:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># ping 192.168.1.111</span><br></pre></td></tr></table></figure></p>
<p>&emsp;&emsp;设置开发板nfs挂载目录和设备树文件名，如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;# setenv rootpath /home/myir/rootfs   -- 使用该方式前将rootfs.tar.gz解压到该nfs目录</span><br><span class="line">&gt;# setenv fdtfile myd_c335x.dtb        -- 这里以MYD-AM335X板为例，使用不同的板型要用对应的dtb文件</span><br><span class="line">&gt;# echo $fdtfile                       -- 查看fdtfile名称是否正确</span><br></pre></td></tr></table></figure></p>
<p>&emsp;&emsp;保存相关环境变量.如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt;# saveenv</span><br></pre></td></tr></table></figure></p>
<p>&emsp;&emsp;U-Boot控制台下执行netboot命令，启动挂载的NFS ROOT文件系统，如下:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt;# run netboot</span><br></pre></td></tr></table></figure></p>
<p>&emsp;&emsp;如果ping serverip正常，但运行run netboot时tftp失败，请检查server端tftp service是否正常，如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ tftp 192.168.1.111</span><br><span class="line">tftp&gt; get myd_c335x.dtb</span><br><span class="line">tftp&gt; quit                                  -- 退出tftp</span><br></pre></td></tr></table></figure></p>
<p>&emsp;&emsp;如果失败，重启tftp service，如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo service tftpd-hpa restart</span><br></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
	<span class="ico-folder"></span>
    <a class="article-category-link" href="../../categories/中文版/">中文版</a>, <a class="article-category-link" href="../../categories/中文版/TI/">TI</a>, <a class="article-category-link" href="../../categories/中文版/TI/AM335X/">AM335X</a>, <a class="article-category-link" href="../../categories/中文版/TI/AM335X/MYD-AM335X-Linux-4-1-18开发手册/">MYD-AM335X-Linux-4.1.18开发手册</a>

      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="../../tags/AM335X/">AM335X</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="../../tags/系统更新/">系统更新</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

  
    <article id="post-myd-am335x/DevelopmentGuide/chapter6/Chapter6"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="../../en/myd-am335x/DevelopmentGuide/chapter6/Chapter6/">6. Update System</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="../../en/myd-am335x/DevelopmentGuide/chapter6/Chapter6/" class="article-date">
	  <time datetime="2018-04-10T07:45:59.000Z" itemprop="datePublished">April 10, 2018</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p>This section introduces the Linux system tf card boot, NAND Flash burn,NFS ROOT file system mount.<br>CD image file description：</p>
<table>
<thead>
<tr>
<th>File Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>MLO</td>
<td>First stage bootloader（SPL)</td>
</tr>
<tr>
<td>u-boot.img</td>
<td>Second stage bootloader</td>
</tr>
<tr>
<td>uEnv.txt</td>
<td>Default environment variables for U-boot</td>
</tr>
<tr>
<td>uEnv_ramdisk.txt</td>
<td>Environment variables for boot ramdisk images on TF/SD card,Need to be renamed to uEnv.txt</td>
</tr>
<tr>
<td>zImage</td>
<td>Kernel image</td>
</tr>
<tr>
<td>myd_c335x.dtb</td>
<td>Device tree binary for MYD-AM335X</td>
</tr>
<tr>
<td>myd_y335x.dtb</td>
<td>Device tree binary for MYD-AM335X-Y</td>
</tr>
<tr>
<td>myd_j335x.dtb</td>
<td>Device tree binary for MYD-AM335X-J</td>
</tr>
<tr>
<td>rootfs.tar.gz</td>
<td>ramdisk filesystem compressed by gzip</td>
</tr>
<tr>
<td>rootfs.ubi</td>
<td>UBIFS filesystem image</td>
</tr>
<tr>
<td>ramdisk.gz</td>
<td>ramdisk filesystem compressed by gzip</td>
</tr>
<tr>
<td>sdcard.img</td>
<td>TF/SD/EMMC disk image</td>
</tr>
</tbody>
</table>
<blockquote>
<p><strong>Note: Startup of the MYD-AM335X Before starting the development board, note the connection of the JP8 jumper, connect JP8-1 and JP8-2 will boot system from SD Card, JP8-2 and JP8-3 will boot system from NandFlash. To effect JP8’S connection modification, please repower up the board after setting the jumpers. MYD-AM335X-Y uses JP1, MYD-AM335X-J uses JP6.</strong></p>
</blockquote>
<p>There are four boot modes for <code>MYD-AM335X</code> series development board to run embedded Linux system:</p>
<ol>
<li>Boot from TF/SD card(EXT4 file system).</li>
<li>Boot from TF/SD card(Ramdisk file system).</li>
<li>Boot from NAND Flash（Ubi file system).</li>
<li>Boot from Ethernet（NFS root for debug）.</li>
</ol>
<h2 id="Boot-from-TF-SD-card-EXT4-file-system"><a href="#Boot-from-TF-SD-card-EXT4-file-system" class="headerlink" title="Boot from TF/SD card(EXT4 file system)"></a>Boot from TF/SD card(EXT4 file system)</h2><blockquote>
<p><strong>Note: Writing <code>sdcard.img</code> will format the TF card, please backup important files.</strong></p>
</blockquote>
<p>After building Buildroot, a TF/SD card image file named as <code>sdcard.img</code> is generated at <code>&lt;WORKDIR&gt;/Filesystem/myir-buildroot/output/images</code>.<br>The ‘sdcard.img’ consists of two partitions, one is FAT partition contains <code>MLO</code>, <code>u-boot.img</code>, <code>zImage</code>, <code>uEnv.txt</code> and device tree binary files for MYD-AM335x series development board, the other partition is EXT4 partition, it will be used as the root partition of Linux.</p>
<p><img src="/en/myd-am335x/DevelopmentGuide/chapter6/6_1.png" alt="Figure 6-1  Write `sdcard.img` to TF/SD card with `win32diskimager`"></p>
<ul>
<li>Put a TF card into the card reader, and connect the card reader to Windows host PC.</li>
<li>Write <code>sdcard.img</code> to the TF card with win32diskimager.exe as shown in Figure 6-1 above.</li>
<li>After writing, power off the MYD-AM335x series development board, put the TF card to its TF slot(J19), set the board to boot from TF/SD card by J5.</li>
<li>Power on the MYD-AM335x series development board, it will boot from TF card and mount the second partition of the TF card as root file system.</li>
</ul>
<h2 id="Boot-from-TF-SD-card-Ramdisk-file-system"><a href="#Boot-from-TF-SD-card-Ramdisk-file-system" class="headerlink" title="Boot from TF/SD card(Ramdisk file system)"></a>Boot from TF/SD card(Ramdisk file system)</h2><blockquote>
<p><strong>Note: HP USB Disk Storage Format Tool will clear original partitions of the TF card. To save the partitions, please use the formatting software provided by the computer system.</strong></p>
</blockquote>
<ul>
<li><p>Format TF card<br>Please use “HP USB Disk Storage Format Tool 2.0.6” from CD directory “03-Tools” to format TF card.</p>
<p>  1.Insert MMC/SD card into the card reader ,then connect the reader with the computer.</p>
<p>  2.Open the HP USB Disk Storage Format Tool, the following steps will show in detail:</p>
</li>
</ul>
<p><img src="/en/myd-am335x/DevelopmentGuide/chapter6/6_2.png" alt="Figure 6-2 Formate TF Card with `HP USB Disk Storage Format Tool 2.0.6`"></p>
<pre><code>3.Select “FAT32”

4.Click “Start”.

5.When the formatting process is completed, click “OK”.
</code></pre><ul>
<li>Update the images.</li>
</ul>
<p>Copy all files under directory “02-Images\Linux-image” from the CD to the TF card. Then insert the TF card to the slot on the development board, Connect the corresponding board to set the start mode of the jumper cap 1-2 Pin, power on the board again,Enter root login.</p>
<h2 id="Boot-from-NAND-Flash（ubi-file-system"><a href="#Boot-from-NAND-Flash（ubi-file-system" class="headerlink" title="Boot from NAND Flash（ubi file system)"></a>Boot from NAND Flash（ubi file system)</h2><p>Update of NAND boot image needs the aid of u-boot. Whether or not NAND Flash has data, the u-boot booted through TF card can be used to update NAND Flash images.</p>
<ul>
<li><p>Preparation</p>
<p>  1.Format the TF card to FAT or FAT32 file system by “HP USB Disk Storage Format Tool 2.0.6” from directory “03-Tools/” of CD.</p>
<p>  2.Copy “MLO”, “u-boot.img”, “zImage”,”myd_*335x.dtb” and “rootfs.ubi” image files under directory “02-Images\Linux-image” to the TF card from the CD.</p>
</li>
<li><p>Update</p>
<p>  Insert the TF card with the system images into the development board, Connect the corresponding board to set the boot mode of the jumper cap 1-2 pin, power on and boot it. Press any key on the PC keyboard to enter the u-boot according to the following prompts:</p>
</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">U-Boot <span class="number">2016.05</span> (Jan <span class="number">09</span> <span class="number">2017</span> - <span class="number">19</span>:<span class="number">37</span>:<span class="number">43</span> +<span class="number">0800</span>)</span><br><span class="line"></span><br><span class="line">       Watchdog enabled</span><br><span class="line">I2C:   ready</span><br><span class="line">DRAM:  <span class="number">512</span> MiB</span><br><span class="line">NAND:  <span class="number">512</span> MiB</span><br><span class="line">MMC:   OMAP SD/MMC: <span class="number">0</span>, OMAP SD/MMC: <span class="number">1</span></span><br><span class="line">*** Warning - bad CRC, <span class="keyword">using</span> <span class="keyword">default</span> environment</span><br><span class="line"></span><br><span class="line">Net:   cpsw</span><br><span class="line">Press SPACE to <span class="built_in">abort</span> autoboot in <span class="number">2</span> seconds</span><br><span class="line">MYIR&gt;#</span><br></pre></td></tr></table></figure>
<pre><code>* After entering the u-boot command line, input “run updatesys” from the PC keyboard to start automatic updating process:
</code></pre><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">MYIR&gt;<span class="meta"># run updatesys</span></span><br><span class="line"></span><br><span class="line">NAND erase.chip: device <span class="number">0</span> whole chip</span><br><span class="line">Erasing at <span class="number">0x1ffe0000</span> -- <span class="number">100</span>% complete.</span><br><span class="line">OK</span><br><span class="line"><span class="keyword">switch</span> to partitions #<span class="number">0</span>, OK</span><br><span class="line">mmc0 is current device</span><br><span class="line">reading MLO</span><br><span class="line"><span class="number">55092</span> bytes read in <span class="number">10</span> ms (<span class="number">5.3</span> MiB/s)</span><br><span class="line"></span><br><span class="line">NAND write: device <span class="number">0</span> offset <span class="number">0x0</span>, size <span class="number">0xd734</span></span><br><span class="line"> <span class="number">55092</span> bytes written: OK</span><br><span class="line">reading myd_c335x.dtb</span><br><span class="line"><span class="number">39229</span> bytes read in <span class="number">10</span> ms (<span class="number">3.7</span> MiB/s)</span><br><span class="line"></span><br><span class="line">NAND write: device <span class="number">0</span> offset <span class="number">0x80000</span>, size <span class="number">0x993d</span></span><br><span class="line"> <span class="number">39229</span> bytes written: OK</span><br><span class="line">reading u-boot.img</span><br><span class="line"><span class="number">321300</span> bytes read in <span class="number">34</span> ms (<span class="number">9</span> MiB/s)</span><br><span class="line"></span><br><span class="line">NAND write: device <span class="number">0</span> offset <span class="number">0xc0000</span>, size <span class="number">0x4e714</span></span><br><span class="line"> <span class="number">321300</span> bytes written: OK</span><br><span class="line">reading zImage</span><br><span class="line"><span class="number">4480016</span> bytes read in <span class="number">396</span> ms (<span class="number">10.8</span> MiB/s)</span><br><span class="line"></span><br><span class="line">NAND write: device <span class="number">0</span> offset <span class="number">0x200000</span>, size <span class="number">0x445c10</span></span><br><span class="line"> <span class="number">4480016</span> bytes written: OK</span><br><span class="line">reading rootfs.ubi</span><br><span class="line"><span class="number">24248320</span> bytes read in <span class="number">2111</span> ms (<span class="number">11</span> MiB/s)</span><br><span class="line"></span><br><span class="line">NAND write: device <span class="number">0</span> offset <span class="number">0xa00000</span>, size <span class="number">0x1720000</span></span><br><span class="line"> <span class="number">24248320</span> bytes written: OK</span><br><span class="line">MYIR&gt;#</span><br></pre></td></tr></table></figure>
<p>After the system is updated, it will automatically u-boot the command line mode，Power off the TF card, connect the corresponding board to set the boot mode of the jumper cap 2-3 pin,To the development board to restart the power can be started from the Nand Flash, enter the root login.</p>
<h2 id="Boot-from-Ethernet（NFS-root-for-debug）"><a href="#Boot-from-Ethernet（NFS-root-for-debug）" class="headerlink" title="Boot from Ethernet（NFS root for debug）"></a>Boot from Ethernet（NFS root for debug）</h2><p>After building Buildroot, a compressed package named as <code>rootfs.tar.gz</code> is generated at <code>&lt;WORKDIR&gt;/Filesystem/myir-buildroot/output/images</code>.<br>This package can be used to work as NFS root for MYD-AM335X series development board.  In order to boot from ethernet, TFTP and NFS services should be installed and configed as below:</p>
<p><strong>Install TFTP Service</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get install tftp-hpa tftpd-hpa</span><br></pre></td></tr></table></figure>
<p><strong>Config TFTP Service</strong></p>
<p>Create a work directory for TFTP, open the configuration file for TFTP as shown below:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ mkdir -p  &lt;WORKDIR&gt;/tftpboot</span><br><span class="line">$ chmod 777 &lt;WORKDIR&gt;/tftpboot</span><br><span class="line">$ sudo vi /etc/default/tftpd-hpa</span><br></pre></td></tr></table></figure>
<p>Add or modify the parameters as shown below:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">TFTP_DIRECTORY=&quot;&lt;WORKDIR&gt;/tftpboot&quot;</span><br><span class="line">TFTP_OPTIONS=&quot;-l -c -s&quot;</span><br></pre></td></tr></table></figure>
<p><strong>Restart TFTP Service</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo service tftpd-hpa restart</span><br></pre></td></tr></table></figure>
<p>Copy the <code>MLO</code>, <code>u-boot.img</code>, <code>zImage</code>, <code>ramdisk.gz</code> and device tree binary files to the work directory of TFTP service,<br>then users can load these image files to the RAM of MYD-AM335X series development board by TFTP in U-boot console, it is shown below:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt;# help tftpboot</span><br><span class="line">tftpboot - boot image via network using TFTP protocol</span><br><span class="line"></span><br><span class="line">Usage:</span><br><span class="line">tftpboot [loadAddress] [[hostIPaddr:]bootfilename]</span><br><span class="line">&gt;# tftpboot $&#123;loadaddr&#125; 192.168.1.111:zImage</span><br></pre></td></tr></table></figure>
<p><strong>Install NFS Service</strong></p>
<p>NFS(Network File System) is a file system can be mounted remotely through network. A directory on NFS server can be used as the root file system<br>of an embedded Linux system. The installation and configuration of NFS service are described below:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get install nfs-kernel-server</span><br></pre></td></tr></table></figure>
<p><strong>Config NFS Service</strong></p>
<p>Edit the <code>/etc/exports</code> file of NFS server, and export a directory at the end of file:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo vi /etc/exports</span><br></pre></td></tr></table></figure>
<p>Add or modify the directory to be exported , such as <code>/home/myir/rootfs</code> has been added as below:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/home/myir/rootfs *(rw,nohide,insecure,no_subtree_check,async,no_root_squash)</span><br></pre></td></tr></table></figure>
<p><strong>Restart NFS service</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ cd /home/myir/rootfs</span><br><span class="line">$ sudo tar zxvf  &lt;WORKDIR&gt;/images/rootfs.tar.gz</span><br><span class="line">$ sudo service nfs-kernel-server restart</span><br></pre></td></tr></table></figure>
<p><strong>Verify NFS service on NFS server</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo mount -t nfs 127.0.0.1:/home/myir/rootfs /mnt</span><br></pre></td></tr></table></figure>
<p><strong>Mount the NFS ROOT filesystem</strong></p>
<p>If NFS service works well, <code>/home/myir/rootfs</code> will be mounted at <code>/mnt</code> with NFS , and then the NFS server is available for MYD-AM335x series development board.Power Up Modification Startup Mode The jumper cap is started for the nandflash mode，Nandflash must have uboot，The factory has been burned.<br>Copy the zImage and dtb files to the <workdir>/tftpboot directory, as follows:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cp &lt;WORKDIR&gt;/Filesystem/myir-buildroot/output/images/zImage &lt;WORKDIR&gt;/tftpboot</span><br><span class="line">cp &lt;WORKDIR&gt;/Filesystem/myir-buildroot/output/images/myd_c335x.dtb &lt;WORKDIR&gt;/tftpboot</span><br></pre></td></tr></table></figure></workdir></p>
<p>Decompression rootfs.tar.gz to the /home/myir/rootfs directory as follows:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /home/myir/rootfs</span><br><span class="line">sudo tar -xvf &lt;WORKDIR&gt;/Filesystem/myir-buildroot/output/images/rootfs.tar.gz ./</span><br></pre></td></tr></table></figure></p>
<p>For example, the IP address of the NFS server is set to <code>192.168.1.111</code>,the IP address of the development board U-boot is set to <code>192.168.1.112</code>,as follows:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;# setenv ipaddr 192.168.1.112</span><br><span class="line">&gt;# setenv serverip 192.168.1.111</span><br></pre></td></tr></table></figure></p>
<p>Verify the ethernet connection by <code>ping</code> command in U-boot console:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># ping 192.168.1.111</span><br></pre></td></tr></table></figure></p>
<p>Set the development board nfs mount directory and device tree file name, as follows:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;# setenv rootpath /home/myir/rootfs    -- Extract the rootfs.tar.gz to the nfs directory</span><br><span class="line">&gt;# setenv fdtfile myd_c335x.dtb</span><br><span class="line">&gt;# echo $fdtfile                        -- Check if the fdtfile name is correct</span><br></pre></td></tr></table></figure></p>
<p>Save the relevant environment variables,as follows:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt;# saveenv</span><br></pre></td></tr></table></figure></p>
<p>Under the U-Boot console, execute the netboot command to start the mounted NFS ROOT file system as follows:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt;# run netboot</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>Note:Ping serverip normal, run runboot after tftp failure, please check the server side tftp service is normal, as follows:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ tftp 192.168.1.111</span><br><span class="line">tftp&gt; get myd_c335x.dtb</span><br><span class="line">tftp&gt; quit                                  --quit tftp</span><br></pre></td></tr></table></figure></p>
</blockquote>
<p>If it fails, restart tftp service, as follows:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo service tftpd-hpa restart</span><br></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
	<span class="ico-folder"></span>
    <a class="article-category-link" href="../../categories/English-Version/">English Version</a>, <a class="article-category-link" href="../../categories/English-Version/TI/">TI</a>, <a class="article-category-link" href="../../categories/English-Version/TI/AM335X/">AM335X</a>, <a class="article-category-link" href="../../categories/English-Version/TI/AM335X/MYD-AM335X-Linux-4-1-18-Development-Guide/">MYD-AM335X-Linux-4.1.18 Development Guide</a>

      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="../../tags/AM335X/">AM335X</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="../../tags/Update-System/">Update System</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="../5/">Prev</a><a class="page-number" href="../../">1</a><span class="space">&hellip;</span><a class="page-number" href="../4/">4</a><a class="page-number" href="../5/">5</a><span class="page-number current">6</span>
  </nav>

</section>
          <aside id="sidebar">
  
    <div class="widget-wrap" style="margin: 20px 0;">
	<div id="search-form-wrap">

    <form class="search-form">
        <label style="width: 75%;">
            <span class="screen-reader-text">Search for:</span>
            <input type="search" class="search-field" style="height: 42px;" placeholder=" Search…" value="" name="s" title="Search for:">
        </label>
        <input type="submit" class="search-form-submit" value="Search">
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="Type something..."/>
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: 'Posts',
            PAGES: 'Pages',
            CATEGORIES: 'Categories',
            TAGS: 'Tags',
            UNTITLED: '(Untitled)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '../../content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
<script src="../../js/insight.js"></script>

</div>
</div>
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Connect With Us</h3>
    <div class="widget widget_athemes_social_icons">

    	<ul class="clearfix widget-social-icons">   
    	
          
     			  <li><a href="https://github.com/sunnygege" title="Github"><i class="fa fa-github" aria-hidden="true"></i></a></li> 
          
   		
          
            <li><a href="mailto:sunnygege@aliyun.com?subject=请联系我&body=我能帮你什么" title="email"><i class="fa fa-envelope" aria-hidden="true"></i></a></li> 
          
   		
   		</ul>


   		<!--
   		<ul class="clearfix widget-social-icons">   		
   		<li class="widget-si-twitter"><a href="http://twitter.com" title="Twitter"><i class="ico-twitter"></i></a></li> 
		  <li class="widget-si-facebook"><a href="http://facebook.com" title="Facebook"><i class="ico-facebook"></i></a></li>
			<li class="widget-si-gplus"><a href="http://plus.google.com" title="Google+"><i class="ico-gplus"></i></a></li>
			<li class="widget-si-pinterest"><a href="http://pinterest.com" title="Pinterest"><i class="ico-pinterest"></i></a></li>
			<li class="widget-si-flickr"><a href="http://flickr.com" title="Flickr"><i class="ico-flickr"></i></a></li>
			<li class="widget-si-instagram"><a href="http://instagram.com" title="Instagram"><i class="ico-instagram"></i></a></li>
		</ul> -->

    </div>
  </div>


  
    
  <div class="widget_athemes_tabs">
    <ul id="widget-tab" class="clearfix widget-tab-nav">
      <li class="active"><a>Recent Posts</a></li>
    </ul>
    <div class="widget">
      <ul>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="../../en/myd-am335x/DevelopmentGuide/">MYD-AM335X-Linux-4.1.18 Development Guide</a></h6>
              <span>April 10, 2018</span>
            </div>

          </li>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="../../zh-CN/myd-am335x/DevelopmentGuide/">MYD-AM335X-Linux-4.1.18开发手册</a></h6>
              <span>April 10, 2018</span>
            </div>

          </li>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="../../zh-CN/myd-am335x/DevelopmentGuide/chapter1/Chapter1/">1. 软件资源介绍</a></h6>
              <span>April 10, 2018</span>
            </div>

          </li>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="../../en/myd-am335x/DevelopmentGuide/chapter1/Chapter1/">1. Software Resources</a></h6>
              <span>April 10, 2018</span>
            </div>

          </li>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="../../zh-CN/myd-am335x/DevelopmentGuide/chapter2/Chapter2/">2. 部署开发环境</a></h6>
              <span>April 10, 2018</span>
            </div>

          </li>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="../../en/myd-am335x/DevelopmentGuide/chapter2/Chapter2/">2. Deploy development environment</a></h6>
              <span>April 10, 2018</span>
            </div>

          </li>
        
      </ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="../../categories/English-Version/">English Version</a><span class="category-list-count">29</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="../../categories/English-Version/TI/">TI</a><span class="category-list-count">29</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="../../categories/English-Version/TI/AM335X/">AM335X</a><span class="category-list-count">29</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="../../categories/English-Version/TI/AM335X/MYD-AM335X-Linux-4-1-18-Development-Guide/">MYD-AM335X-Linux-4.1.18 Development Guide</a><span class="category-list-count">29</span></li></ul></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="../../categories/中文版/">中文版</a><span class="category-list-count">29</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="../../categories/中文版/TI/">TI</a><span class="category-list-count">29</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="../../categories/中文版/TI/AM335X/">AM335X</a><span class="category-list-count">29</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="../../categories/中文版/TI/AM335X/MYD-AM335X-Linux-4-1-18开发手册/">MYD-AM335X-Linux-4.1.18开发手册</a><span class="category-list-count">29</span></li></ul></li></ul></li></ul></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="../../tags/AM335X/">AM335X</a><span class="tag-list-count">58</span></li><li class="tag-list-item"><a class="tag-list-link" href="../../tags/Audio/">Audio</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="../../tags/Buildroot/">Buildroot</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="../../tags/Bulidroot/">Bulidroot</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="../../tags/CAN-BUS/">CAN BUS</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="../../tags/Cross-Compiler/">Cross Compiler</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="../../tags/Ethernet/">Ethernet</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="../../tags/Examples/">Examples</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="../../tags/FrameBuffer/">FrameBuffer</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="../../tags/GPIO-LED/">GPIO-LED</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="../../tags/Kernel/">Kernel</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="../../tags/KeyPad/">KeyPad</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="../../tags/LCD/">LCD</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="../../tags/Linux/">Linux</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="../../tags/NAND-Flash/">NAND Flash</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="../../tags/QT-Application/">QT Application</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="../../tags/QT5/">QT5</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="../../tags/QtCreator/">QtCreator</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="../../tags/RS485/">RS485</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="../../tags/RTC/">RTC</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="../../tags/SDIO-WiFi/">SDIO WiFi</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="../../tags/Software-Resources/">Software Resources</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="../../tags/Touch-Panel/">Touch Panel</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="../../tags/USB-Device/">USB Device</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="../../tags/USB-Host/">USB Host</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="../../tags/Update-System/">Update System</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="../../tags/build-essential/">build-essential</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="../../tags/rootfs/">rootfs</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="../../tags/toolchain/">toolchain</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="../../tags/ts-calibrate/">ts_calibrate</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="../../tags/u-boot/">u-boot</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="../../tags/工具链/">工具链</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="../../tags/应用程序/">应用程序</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="../../tags/开发环境/">开发环境</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="../../tags/系统更新/">系统更新</a><span class="tag-list-count">1</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="../../tags/AM335X/" style="font-size: 20px;">AM335X</a> <a href="../../tags/Audio/" style="font-size: 12px;">Audio</a> <a href="../../tags/Buildroot/" style="font-size: 12px;">Buildroot</a> <a href="../../tags/Bulidroot/" style="font-size: 12px;">Bulidroot</a> <a href="../../tags/CAN-BUS/" style="font-size: 12px;">CAN BUS</a> <a href="../../tags/Cross-Compiler/" style="font-size: 10px;">Cross Compiler</a> <a href="../../tags/Ethernet/" style="font-size: 12px;">Ethernet</a> <a href="../../tags/Examples/" style="font-size: 10px;">Examples</a> <a href="../../tags/FrameBuffer/" style="font-size: 12px;">FrameBuffer</a> <a href="../../tags/GPIO-LED/" style="font-size: 12px;">GPIO-LED</a> <a href="../../tags/Kernel/" style="font-size: 12px;">Kernel</a> <a href="../../tags/KeyPad/" style="font-size: 12px;">KeyPad</a> <a href="../../tags/LCD/" style="font-size: 12px;">LCD</a> <a href="../../tags/Linux/" style="font-size: 12px;">Linux</a> <a href="../../tags/NAND-Flash/" style="font-size: 12px;">NAND Flash</a> <a href="../../tags/QT-Application/" style="font-size: 10px;">QT Application</a> <a href="../../tags/QT5/" style="font-size: 18px;">QT5</a> <a href="../../tags/QtCreator/" style="font-size: 18px;">QtCreator</a> <a href="../../tags/RS485/" style="font-size: 12px;">RS485</a> <a href="../../tags/RTC/" style="font-size: 12px;">RTC</a> <a href="../../tags/SDIO-WiFi/" style="font-size: 12px;">SDIO WiFi</a> <a href="../../tags/Software-Resources/" style="font-size: 10px;">Software Resources</a> <a href="../../tags/Touch-Panel/" style="font-size: 12px;">Touch Panel</a> <a href="../../tags/USB-Device/" style="font-size: 12px;">USB Device</a> <a href="../../tags/USB-Host/" style="font-size: 12px;">USB Host</a> <a href="../../tags/Update-System/" style="font-size: 10px;">Update System</a> <a href="../../tags/build-essential/" style="font-size: 10px;">build-essential</a> <a href="../../tags/rootfs/" style="font-size: 12px;">rootfs</a> <a href="../../tags/toolchain/" style="font-size: 10px;">toolchain</a> <a href="../../tags/ts-calibrate/" style="font-size: 12px;">ts_calibrate</a> <a href="../../tags/u-boot/" style="font-size: 12px;">u-boot</a> <a href="../../tags/工具链/" style="font-size: 14px;">工具链</a> <a href="../../tags/应用程序/" style="font-size: 10px;">应用程序</a> <a href="../../tags/开发环境/" style="font-size: 16px;">开发环境</a> <a href="../../tags/系统更新/" style="font-size: 10px;">系统更新</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>

    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="../../archives/2018/04/">April 2018</a><span class="archive-list-count">58</span></li></ul>
    </div>
  </div>


  
</aside>
        
      </div>
      <footer id="footer" class="site-footer">
  

  <div class="clearfix container">
      <div class="site-info">
	      &copy; 2018 SunnyMorning All Rights Reserved.
          
            <span id="busuanzi_container_site_uv">
              本站访客数<span id="busuanzi_value_site_uv"></span>人次  
              本站总访问量<span id="busuanzi_value_site_pv"></span>次
            </span>
          
      </div>
  </div>
</footer>


<!-- min height -->

<script>
    var contentdiv = document.getElementById("content");

    contentdiv.style.minHeight = document.body.offsetHeight - document.getElementById("allheader").offsetHeight - document.getElementById("footer").offsetHeight + "px";
</script>

<!-- Custome JS -->
<script src="../../js/my.js"></script>

    </div>
    <!-- <nav id="mobile-nav">
  
    <a href="../../index.html" class="mobile-nav-link">Home</a>
  
    <a href="../../archives" class="mobile-nav-link">Archives</a>
  
    <a href="../../categories" class="mobile-nav-link">Categories</a>
  
    <a href="../../tags" class="mobile-nav-link">Tags</a>
  
    <a href="../../about" class="mobile-nav-link">About</a>
  
</nav> -->
    

<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


  <link rel="stylesheet" href="../../fancybox/jquery.fancybox.css">
  <script src="../../fancybox/jquery.fancybox.pack.js"></script>


<script src="../../js/scripts.js"></script>
<script src="../../js/bootstrap.js"></script>
<script src="../../js/main.js"></script>







  <div style="display: none;">
    <script src="https://s95.cnzz.com/z_stat.php?id=1260716016&web_id=1260716016" language="JavaScript"></script>
  </div>



	<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
	</script>






  </div>

  <a id="rocket" href="#top" class=""></a>
  <script type="text/javascript" src="/js/totop.js" async=""></script>
</body>
</html>
